"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/appointments";
exports.ids = ["pages/api/appointments"];
exports.modules = {

/***/ "(api-node)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// PrismaClient is attached to the `global` object in development to prevent\n// exhausting your database connection limit.\n// Learn more: https://pris.ly/d/help/next-js-best-practices\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        'query',\n        'error',\n        'warn'\n    ] : 0\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9wcmlzbWEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZDO0FBRTdDLDRFQUE0RTtBQUM1RSw2Q0FBNkM7QUFDN0MsNERBQTREO0FBRTVELE1BQU1DLGtCQUFrQkM7QUFFakIsTUFBTUMsU0FDWEYsZ0JBQWdCRSxNQUFNLElBQ3RCLElBQUlILHdEQUFZQSxDQUFDO0lBQ2ZJLEtBQUtDLEtBQXNDLEdBQUc7UUFBQztRQUFTO1FBQVM7S0FBTyxHQUFHLENBQVM7QUFDdEYsR0FBRTtBQUVKLElBQUlBLElBQXFDLEVBQUVKLGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsiL1VzZXJzL3NiaGF2YW5pL2NvZGUvcmFkaWFudC1mbG93LWltYWdpbmctaHViL2xpYi9wcmlzbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbi8vIFByaXNtYUNsaWVudCBpcyBhdHRhY2hlZCB0byB0aGUgYGdsb2JhbGAgb2JqZWN0IGluIGRldmVsb3BtZW50IHRvIHByZXZlbnRcbi8vIGV4aGF1c3RpbmcgeW91ciBkYXRhYmFzZSBjb25uZWN0aW9uIGxpbWl0LlxuLy8gTGVhcm4gbW9yZTogaHR0cHM6Ly9wcmlzLmx5L2QvaGVscC9uZXh0LWpzLWJlc3QtcHJhY3RpY2VzXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbCBhcyB1bmtub3duIGFzIHsgcHJpc21hOiBQcmlzbWFDbGllbnQgfVxuXG5leHBvcnQgY29uc3QgcHJpc21hID1cbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fFxuICBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBsb2c6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gWydxdWVyeScsICdlcnJvcicsICd3YXJuJ10gOiBbJ2Vycm9yJ10sXG4gIH0pXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api-node)/./node_modules/.pnpm/next@15.3.2_@babel+core@7.27.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fappointments&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fappointments%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.3.2_@babel+core@7.27.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fappointments&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fappointments%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/.pnpm/next@15.3.2_@babel+core@7.27.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/.pnpm/next@15.3.2_@babel+core@7.27.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/.pnpm/next@15.3.2_@babel+core@7.27.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_appointments_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/appointments/index.ts */ \"(api-node)/./pages/api/appointments/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_appointments_index_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_appointments_index_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/appointments\",\n        pathname: \"/api/appointments\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_appointments_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9uZXh0QDE1LjMuMl9AYmFiZWwrY29yZUA3LjI3LjFfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFwcG9pbnRtZW50cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGYXBwb2ludG1lbnRzJTJGaW5kZXgudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDOEQ7QUFDOUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDZEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw2REFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9hcHBvaW50bWVudHMvaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FwcG9pbnRtZW50c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FwcG9pbnRtZW50c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/.pnpm/next@15.3.2_@babel+core@7.27.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fappointments&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fappointments%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/appointments/index.ts":
/*!*****************************************!*\
  !*** ./pages/api/appointments/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(api-node)/./lib/prisma.ts\");\n\nasync function handler(req, res) {\n    switch(req.method){\n        case 'GET':\n            return await getAppointments(req, res);\n        case 'POST':\n            return await createAppointment(req, res);\n        default:\n            res.setHeader('Allow', [\n                'GET',\n                'POST'\n            ]);\n            return res.status(405).json({\n                error: `Method ${req.method} Not Allowed`\n            });\n    }\n}\n// Get appointments with filtering options\nasync function getAppointments(req, res) {\n    try {\n        const { patientId, providerId, appointmentTypeId, startDate, endDate, status } = req.query;\n        // Build the query filter\n        const filter = {};\n        // Filter by associations\n        if (patientId && typeof patientId === 'string') {\n            filter.patientId = patientId;\n        }\n        if (providerId && typeof providerId === 'string') {\n            filter.providerId = providerId;\n        }\n        if (appointmentTypeId && typeof appointmentTypeId === 'string') {\n            filter.appointmentTypeId = appointmentTypeId;\n        }\n        // Filter by date range\n        if (startDate || endDate) {\n            filter.startTime = {};\n            if (startDate && typeof startDate === 'string') {\n                filter.startTime.gte = new Date(startDate);\n            }\n            if (endDate && typeof endDate === 'string') {\n                filter.startTime.lte = new Date(endDate);\n            }\n        }\n        // Filter by status\n        if (status && typeof status === 'string') {\n            if (status === 'ACTIVE') {\n                // Special case for active appointments (scheduled or confirmed)\n                filter.status = {\n                    in: [\n                        'SCHEDULED',\n                        'CONFIRMED'\n                    ]\n                };\n            } else {\n                filter.status = status;\n            }\n        }\n        const appointments = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.appointment.findMany({\n            where: filter,\n            include: {\n                patient: true,\n                provider: true,\n                appointmentType: true\n            },\n            orderBy: {\n                startTime: 'asc'\n            }\n        });\n        return res.status(200).json(appointments);\n    } catch (error) {\n        console.error('Error fetching appointments:', error);\n        return res.status(500).json({\n            error: 'Failed to fetch appointments'\n        });\n    }\n}\n// Create a new appointment\nasync function createAppointment(req, res) {\n    try {\n        const { title, patientId, providerId, appointmentTypeId, startTime, endTime, notes, status } = req.body;\n        // Validate required fields\n        if (!title || !patientId || !providerId || !startTime || !endTime) {\n            return res.status(400).json({\n                error: 'Title, patient ID, provider ID, start time, and end time are required'\n            });\n        }\n        // Validate patient and provider exist\n        const patient = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.patient.findUnique({\n            where: {\n                id: patientId\n            }\n        });\n        if (!patient) {\n            return res.status(404).json({\n                error: 'Patient not found'\n            });\n        }\n        const provider = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.provider.findUnique({\n            where: {\n                id: providerId\n            }\n        });\n        if (!provider) {\n            return res.status(404).json({\n                error: 'Provider not found'\n            });\n        }\n        // Validate appointment type if provided\n        if (appointmentTypeId) {\n            const appointmentType = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.appointmentType.findUnique({\n                where: {\n                    id: appointmentTypeId\n                }\n            });\n            if (!appointmentType) {\n                return res.status(404).json({\n                    error: 'Appointment type not found'\n                });\n            }\n        }\n        // Validate times\n        const parsedStartTime = new Date(startTime);\n        const parsedEndTime = new Date(endTime);\n        if (isNaN(parsedStartTime.getTime()) || isNaN(parsedEndTime.getTime())) {\n            return res.status(400).json({\n                error: 'Invalid date format'\n            });\n        }\n        if (parsedEndTime <= parsedStartTime) {\n            return res.status(400).json({\n                error: 'End time must be after start time'\n            });\n        }\n        // Check for overlapping appointments for the provider\n        const overlappingProviderAppointments = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.appointment.findMany({\n            where: {\n                providerId,\n                status: {\n                    in: [\n                        'SCHEDULED',\n                        'CONFIRMED'\n                    ]\n                },\n                OR: [\n                    {\n                        // New start time is within an existing appointment\n                        AND: [\n                            {\n                                startTime: {\n                                    lte: parsedStartTime\n                                }\n                            },\n                            {\n                                endTime: {\n                                    gt: parsedStartTime\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        // New end time is within an existing appointment\n                        AND: [\n                            {\n                                startTime: {\n                                    lt: parsedEndTime\n                                }\n                            },\n                            {\n                                endTime: {\n                                    gte: parsedEndTime\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        // New appointment completely contains an existing appointment\n                        AND: [\n                            {\n                                startTime: {\n                                    gte: parsedStartTime\n                                }\n                            },\n                            {\n                                endTime: {\n                                    lte: parsedEndTime\n                                }\n                            }\n                        ]\n                    }\n                ]\n            }\n        });\n        if (overlappingProviderAppointments.length > 0) {\n            return res.status(400).json({\n                error: 'This time slot overlaps with another appointment for this provider'\n            });\n        }\n        // Check for overlapping appointments for the patient\n        const overlappingPatientAppointments = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.appointment.findMany({\n            where: {\n                patientId,\n                status: {\n                    in: [\n                        'SCHEDULED',\n                        'CONFIRMED'\n                    ]\n                },\n                OR: [\n                    {\n                        // New start time is within an existing appointment\n                        AND: [\n                            {\n                                startTime: {\n                                    lte: parsedStartTime\n                                }\n                            },\n                            {\n                                endTime: {\n                                    gt: parsedStartTime\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        // New end time is within an existing appointment\n                        AND: [\n                            {\n                                startTime: {\n                                    lt: parsedEndTime\n                                }\n                            },\n                            {\n                                endTime: {\n                                    gte: parsedEndTime\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        // New appointment completely contains an existing appointment\n                        AND: [\n                            {\n                                startTime: {\n                                    gte: parsedStartTime\n                                }\n                            },\n                            {\n                                endTime: {\n                                    lte: parsedEndTime\n                                }\n                            }\n                        ]\n                    }\n                ]\n            }\n        });\n        if (overlappingPatientAppointments.length > 0) {\n            return res.status(400).json({\n                error: 'This time slot overlaps with another appointment for this patient'\n            });\n        }\n        // Create the appointment\n        const appointment = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.appointment.create({\n            data: {\n                title,\n                patientId,\n                providerId,\n                appointmentTypeId: appointmentTypeId || null,\n                startTime: parsedStartTime,\n                endTime: parsedEndTime,\n                notes: notes || null,\n                status: status || 'SCHEDULED'\n            },\n            include: {\n                patient: true,\n                provider: true,\n                appointmentType: true\n            }\n        });\n        // If there's a time slot that corresponds to this appointment, mark it as unavailable\n        // This is a simplification - in a real system, you might want to handle this differently\n        // or even have a direct relation between appointments and time slots\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.timeSlot.updateMany({\n            where: {\n                providerId,\n                startTime: parsedStartTime,\n                endTime: parsedEndTime,\n                isAvailable: true\n            },\n            data: {\n                isAvailable: false\n            }\n        });\n        return res.status(201).json(appointment);\n    } catch (error) {\n        console.error('Error creating appointment:', error);\n        return res.status(500).json({\n            error: 'Failed to create appointment'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9hcHBvaW50bWVudHMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDc0M7QUFFdkIsZUFBZUMsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsT0FBUUQsSUFBSUUsTUFBTTtRQUNoQixLQUFLO1lBQ0gsT0FBTyxNQUFNQyxnQkFBZ0JILEtBQUtDO1FBQ3BDLEtBQUs7WUFDSCxPQUFPLE1BQU1HLGtCQUFrQkosS0FBS0M7UUFDdEM7WUFDRUEsSUFBSUksU0FBUyxDQUFDLFNBQVM7Z0JBQUM7Z0JBQU87YUFBTztZQUN0QyxPQUFPSixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPLENBQUMsT0FBTyxFQUFFUixJQUFJRSxNQUFNLENBQUMsWUFBWSxDQUFDO1lBQUM7SUFDNUU7QUFDRjtBQUVBLDBDQUEwQztBQUMxQyxlQUFlQyxnQkFBZ0JILEdBQW1CLEVBQUVDLEdBQW9CO0lBQ3RFLElBQUk7UUFDRixNQUFNLEVBQ0pRLFNBQVMsRUFDVEMsVUFBVSxFQUNWQyxpQkFBaUIsRUFDakJDLFNBQVMsRUFDVEMsT0FBTyxFQUNQUCxNQUFNLEVBQ1AsR0FBR04sSUFBSWMsS0FBSztRQUViLHlCQUF5QjtRQUN6QixNQUFNQyxTQUFjLENBQUM7UUFFckIseUJBQXlCO1FBQ3pCLElBQUlOLGFBQWEsT0FBT0EsY0FBYyxVQUFVO1lBQzlDTSxPQUFPTixTQUFTLEdBQUdBO1FBQ3JCO1FBRUEsSUFBSUMsY0FBYyxPQUFPQSxlQUFlLFVBQVU7WUFDaERLLE9BQU9MLFVBQVUsR0FBR0E7UUFDdEI7UUFFQSxJQUFJQyxxQkFBcUIsT0FBT0Esc0JBQXNCLFVBQVU7WUFDOURJLE9BQU9KLGlCQUFpQixHQUFHQTtRQUM3QjtRQUVBLHVCQUF1QjtRQUN2QixJQUFJQyxhQUFhQyxTQUFTO1lBQ3hCRSxPQUFPQyxTQUFTLEdBQUcsQ0FBQztZQUVwQixJQUFJSixhQUFhLE9BQU9BLGNBQWMsVUFBVTtnQkFDOUNH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LENBQUNDLFVBQVUsQ0FBQztZQUMvQjNCLE9BQU87Z0JBQ0xkO2dCQUNBTSxXQUFXcUI7Z0JBQ1hMLFNBQVNNO2dCQUNUYyxhQUFhO1lBQ2Y7WUFDQUgsTUFBTTtnQkFDSkcsYUFBYTtZQUNmO1FBQ0Y7UUFFQSxPQUFPbkQsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ2U7SUFDOUIsRUFBRSxPQUFPZCxPQUFPO1FBQ2RzQixRQUFRdEIsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBT1AsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQStCO0lBQ3RFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYmhhdmFuaS9jb2RlL3JhZGlhbnQtZmxvdy1pbWFnaW5nLWh1Yi9wYWdlcy9hcGkvYXBwb2ludG1lbnRzL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgc3dpdGNoIChyZXEubWV0aG9kKSB7XG4gICAgY2FzZSAnR0VUJzpcbiAgICAgIHJldHVybiBhd2FpdCBnZXRBcHBvaW50bWVudHMocmVxLCByZXMpO1xuICAgIGNhc2UgJ1BPU1QnOlxuICAgICAgcmV0dXJuIGF3YWl0IGNyZWF0ZUFwcG9pbnRtZW50KHJlcSwgcmVzKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmVzLnNldEhlYWRlcignQWxsb3cnLCBbJ0dFVCcsICdQT1NUJ10pO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGAgfSk7XG4gIH1cbn1cblxuLy8gR2V0IGFwcG9pbnRtZW50cyB3aXRoIGZpbHRlcmluZyBvcHRpb25zXG5hc3luYyBmdW5jdGlvbiBnZXRBcHBvaW50bWVudHMocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IFxuICAgICAgcGF0aWVudElkLCBcbiAgICAgIHByb3ZpZGVySWQsIFxuICAgICAgYXBwb2ludG1lbnRUeXBlSWQsIFxuICAgICAgc3RhcnREYXRlLCBcbiAgICAgIGVuZERhdGUsIFxuICAgICAgc3RhdHVzIFxuICAgIH0gPSByZXEucXVlcnk7XG4gICAgXG4gICAgLy8gQnVpbGQgdGhlIHF1ZXJ5IGZpbHRlclxuICAgIGNvbnN0IGZpbHRlcjogYW55ID0ge307XG4gICAgXG4gICAgLy8gRmlsdGVyIGJ5IGFzc29jaWF0aW9uc1xuICAgIGlmIChwYXRpZW50SWQgJiYgdHlwZW9mIHBhdGllbnRJZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGZpbHRlci5wYXRpZW50SWQgPSBwYXRpZW50SWQ7XG4gICAgfVxuICAgIFxuICAgIGlmIChwcm92aWRlcklkICYmIHR5cGVvZiBwcm92aWRlcklkID09PSAnc3RyaW5nJykge1xuICAgICAgZmlsdGVyLnByb3ZpZGVySWQgPSBwcm92aWRlcklkO1xuICAgIH1cbiAgICBcbiAgICBpZiAoYXBwb2ludG1lbnRUeXBlSWQgJiYgdHlwZW9mIGFwcG9pbnRtZW50VHlwZUlkID09PSAnc3RyaW5nJykge1xuICAgICAgZmlsdGVyLmFwcG9pbnRtZW50VHlwZUlkID0gYXBwb2ludG1lbnRUeXBlSWQ7XG4gICAgfVxuICAgIFxuICAgIC8vIEZpbHRlciBieSBkYXRlIHJhbmdlXG4gICAgaWYgKHN0YXJ0RGF0ZSB8fCBlbmREYXRlKSB7XG4gICAgICBmaWx0ZXIuc3RhcnRUaW1lID0ge307XG4gICAgICBcbiAgICAgIGlmIChzdGFydERhdGUgJiYgdHlwZW9mIHN0YXJ0RGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZmlsdGVyLnN0YXJ0VGltZS5ndGUgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZW5kRGF0ZSAmJiB0eXBlb2YgZW5kRGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZmlsdGVyLnN0YXJ0VGltZS5sdGUgPSBuZXcgRGF0ZShlbmREYXRlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRmlsdGVyIGJ5IHN0YXR1c1xuICAgIGlmIChzdGF0dXMgJiYgdHlwZW9mIHN0YXR1cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChzdGF0dXMgPT09ICdBQ1RJVkUnKSB7XG4gICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgYWN0aXZlIGFwcG9pbnRtZW50cyAoc2NoZWR1bGVkIG9yIGNvbmZpcm1lZClcbiAgICAgICAgZmlsdGVyLnN0YXR1cyA9IHsgaW46IFsnU0NIRURVTEVEJywgJ0NPTkZJUk1FRCddIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaWx0ZXIuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBhcHBvaW50bWVudHMgPSBhd2FpdCBwcmlzbWEuYXBwb2ludG1lbnQuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IGZpbHRlcixcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgcGF0aWVudDogdHJ1ZSxcbiAgICAgICAgcHJvdmlkZXI6IHRydWUsXG4gICAgICAgIGFwcG9pbnRtZW50VHlwZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7XG4gICAgICAgIHN0YXJ0VGltZTogJ2FzYycsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihhcHBvaW50bWVudHMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFwcG9pbnRtZW50czonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggYXBwb2ludG1lbnRzJyB9KTtcbiAgfVxufVxuXG4vLyBDcmVhdGUgYSBuZXcgYXBwb2ludG1lbnRcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFwcG9pbnRtZW50KHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBcbiAgICAgIHRpdGxlLCBcbiAgICAgIHBhdGllbnRJZCwgXG4gICAgICBwcm92aWRlcklkLCBcbiAgICAgIGFwcG9pbnRtZW50VHlwZUlkLCBcbiAgICAgIHN0YXJ0VGltZSwgXG4gICAgICBlbmRUaW1lLCBcbiAgICAgIG5vdGVzLCBcbiAgICAgIHN0YXR1cyBcbiAgICB9ID0gcmVxLmJvZHk7XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCF0aXRsZSB8fCAhcGF0aWVudElkIHx8ICFwcm92aWRlcklkIHx8ICFzdGFydFRpbWUgfHwgIWVuZFRpbWUpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICBlcnJvcjogJ1RpdGxlLCBwYXRpZW50IElELCBwcm92aWRlciBJRCwgc3RhcnQgdGltZSwgYW5kIGVuZCB0aW1lIGFyZSByZXF1aXJlZCcgXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcGF0aWVudCBhbmQgcHJvdmlkZXIgZXhpc3RcbiAgICBjb25zdCBwYXRpZW50ID0gYXdhaXQgcHJpc21hLnBhdGllbnQuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcGF0aWVudElkIH0sXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFwYXRpZW50KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1BhdGllbnQgbm90IGZvdW5kJyB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcHJvdmlkZXIgPSBhd2FpdCBwcmlzbWEucHJvdmlkZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcHJvdmlkZXJJZCB9LFxuICAgIH0pO1xuICAgIFxuICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnUHJvdmlkZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgYXBwb2ludG1lbnQgdHlwZSBpZiBwcm92aWRlZFxuICAgIGlmIChhcHBvaW50bWVudFR5cGVJZCkge1xuICAgICAgY29uc3QgYXBwb2ludG1lbnRUeXBlID0gYXdhaXQgcHJpc21hLmFwcG9pbnRtZW50VHlwZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGFwcG9pbnRtZW50VHlwZUlkIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCFhcHBvaW50bWVudFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdBcHBvaW50bWVudCB0eXBlIG5vdCBmb3VuZCcgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHRpbWVzXG4gICAgY29uc3QgcGFyc2VkU3RhcnRUaW1lID0gbmV3IERhdGUoc3RhcnRUaW1lKTtcbiAgICBjb25zdCBwYXJzZWRFbmRUaW1lID0gbmV3IERhdGUoZW5kVGltZSk7XG4gICAgXG4gICAgaWYgKGlzTmFOKHBhcnNlZFN0YXJ0VGltZS5nZXRUaW1lKCkpIHx8IGlzTmFOKHBhcnNlZEVuZFRpbWUuZ2V0VGltZSgpKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGRhdGUgZm9ybWF0JyB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHBhcnNlZEVuZFRpbWUgPD0gcGFyc2VkU3RhcnRUaW1lKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0VuZCB0aW1lIG11c3QgYmUgYWZ0ZXIgc3RhcnQgdGltZScgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBvdmVybGFwcGluZyBhcHBvaW50bWVudHMgZm9yIHRoZSBwcm92aWRlclxuICAgIGNvbnN0IG92ZXJsYXBwaW5nUHJvdmlkZXJBcHBvaW50bWVudHMgPSBhd2FpdCBwcmlzbWEuYXBwb2ludG1lbnQuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgcHJvdmlkZXJJZCxcbiAgICAgICAgc3RhdHVzOiB7IGluOiBbJ1NDSEVEVUxFRCcsICdDT05GSVJNRUQnXSB9LFxuICAgICAgICBPUjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIC8vIE5ldyBzdGFydCB0aW1lIGlzIHdpdGhpbiBhbiBleGlzdGluZyBhcHBvaW50bWVudFxuICAgICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAgIHsgc3RhcnRUaW1lOiB7IGx0ZTogcGFyc2VkU3RhcnRUaW1lIH0gfSxcbiAgICAgICAgICAgICAgeyBlbmRUaW1lOiB7IGd0OiBwYXJzZWRTdGFydFRpbWUgfSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC8vIE5ldyBlbmQgdGltZSBpcyB3aXRoaW4gYW4gZXhpc3RpbmcgYXBwb2ludG1lbnRcbiAgICAgICAgICAgIEFORDogW1xuICAgICAgICAgICAgICB7IHN0YXJ0VGltZTogeyBsdDogcGFyc2VkRW5kVGltZSB9IH0sXG4gICAgICAgICAgICAgIHsgZW5kVGltZTogeyBndGU6IHBhcnNlZEVuZFRpbWUgfSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC8vIE5ldyBhcHBvaW50bWVudCBjb21wbGV0ZWx5IGNvbnRhaW5zIGFuIGV4aXN0aW5nIGFwcG9pbnRtZW50XG4gICAgICAgICAgICBBTkQ6IFtcbiAgICAgICAgICAgICAgeyBzdGFydFRpbWU6IHsgZ3RlOiBwYXJzZWRTdGFydFRpbWUgfSB9LFxuICAgICAgICAgICAgICB7IGVuZFRpbWU6IHsgbHRlOiBwYXJzZWRFbmRUaW1lIH0gfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKG92ZXJsYXBwaW5nUHJvdmlkZXJBcHBvaW50bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgIGVycm9yOiAnVGhpcyB0aW1lIHNsb3Qgb3ZlcmxhcHMgd2l0aCBhbm90aGVyIGFwcG9pbnRtZW50IGZvciB0aGlzIHByb3ZpZGVyJyBcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3Igb3ZlcmxhcHBpbmcgYXBwb2ludG1lbnRzIGZvciB0aGUgcGF0aWVudFxuICAgIGNvbnN0IG92ZXJsYXBwaW5nUGF0aWVudEFwcG9pbnRtZW50cyA9IGF3YWl0IHByaXNtYS5hcHBvaW50bWVudC5maW5kTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBwYXRpZW50SWQsXG4gICAgICAgIHN0YXR1czogeyBpbjogWydTQ0hFRFVMRUQnLCAnQ09ORklSTUVEJ10gfSxcbiAgICAgICAgT1I6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAvLyBOZXcgc3RhcnQgdGltZSBpcyB3aXRoaW4gYW4gZXhpc3RpbmcgYXBwb2ludG1lbnRcbiAgICAgICAgICAgIEFORDogW1xuICAgICAgICAgICAgICB7IHN0YXJ0VGltZTogeyBsdGU6IHBhcnNlZFN0YXJ0VGltZSB9IH0sXG4gICAgICAgICAgICAgIHsgZW5kVGltZTogeyBndDogcGFyc2VkU3RhcnRUaW1lIH0gfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAvLyBOZXcgZW5kIHRpbWUgaXMgd2l0aGluIGFuIGV4aXN0aW5nIGFwcG9pbnRtZW50XG4gICAgICAgICAgICBBTkQ6IFtcbiAgICAgICAgICAgICAgeyBzdGFydFRpbWU6IHsgbHQ6IHBhcnNlZEVuZFRpbWUgfSB9LFxuICAgICAgICAgICAgICB7IGVuZFRpbWU6IHsgZ3RlOiBwYXJzZWRFbmRUaW1lIH0gfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAvLyBOZXcgYXBwb2ludG1lbnQgY29tcGxldGVseSBjb250YWlucyBhbiBleGlzdGluZyBhcHBvaW50bWVudFxuICAgICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAgIHsgc3RhcnRUaW1lOiB7IGd0ZTogcGFyc2VkU3RhcnRUaW1lIH0gfSxcbiAgICAgICAgICAgICAgeyBlbmRUaW1lOiB7IGx0ZTogcGFyc2VkRW5kVGltZSB9IH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICAgIGlmIChvdmVybGFwcGluZ1BhdGllbnRBcHBvaW50bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgIGVycm9yOiAnVGhpcyB0aW1lIHNsb3Qgb3ZlcmxhcHMgd2l0aCBhbm90aGVyIGFwcG9pbnRtZW50IGZvciB0aGlzIHBhdGllbnQnIFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSB0aGUgYXBwb2ludG1lbnRcbiAgICBjb25zdCBhcHBvaW50bWVudCA9IGF3YWl0IHByaXNtYS5hcHBvaW50bWVudC5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB0aXRsZSxcbiAgICAgICAgcGF0aWVudElkLFxuICAgICAgICBwcm92aWRlcklkLFxuICAgICAgICBhcHBvaW50bWVudFR5cGVJZDogYXBwb2ludG1lbnRUeXBlSWQgfHwgbnVsbCxcbiAgICAgICAgc3RhcnRUaW1lOiBwYXJzZWRTdGFydFRpbWUsXG4gICAgICAgIGVuZFRpbWU6IHBhcnNlZEVuZFRpbWUsXG4gICAgICAgIG5vdGVzOiBub3RlcyB8fCBudWxsLFxuICAgICAgICBzdGF0dXM6IHN0YXR1cyB8fCAnU0NIRURVTEVEJyxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHBhdGllbnQ6IHRydWUsXG4gICAgICAgIHByb3ZpZGVyOiB0cnVlLFxuICAgICAgICBhcHBvaW50bWVudFR5cGU6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICAgIC8vIElmIHRoZXJlJ3MgYSB0aW1lIHNsb3QgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIGFwcG9pbnRtZW50LCBtYXJrIGl0IGFzIHVuYXZhaWxhYmxlXG4gICAgLy8gVGhpcyBpcyBhIHNpbXBsaWZpY2F0aW9uIC0gaW4gYSByZWFsIHN5c3RlbSwgeW91IG1pZ2h0IHdhbnQgdG8gaGFuZGxlIHRoaXMgZGlmZmVyZW50bHlcbiAgICAvLyBvciBldmVuIGhhdmUgYSBkaXJlY3QgcmVsYXRpb24gYmV0d2VlbiBhcHBvaW50bWVudHMgYW5kIHRpbWUgc2xvdHNcbiAgICBhd2FpdCBwcmlzbWEudGltZVNsb3QudXBkYXRlTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBwcm92aWRlcklkLFxuICAgICAgICBzdGFydFRpbWU6IHBhcnNlZFN0YXJ0VGltZSxcbiAgICAgICAgZW5kVGltZTogcGFyc2VkRW5kVGltZSxcbiAgICAgICAgaXNBdmFpbGFibGU6IHRydWUsXG4gICAgICB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBpc0F2YWlsYWJsZTogZmFsc2UsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbihhcHBvaW50bWVudCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgYXBwb2ludG1lbnQ6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBhcHBvaW50bWVudCcgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiZ2V0QXBwb2ludG1lbnRzIiwiY3JlYXRlQXBwb2ludG1lbnQiLCJzZXRIZWFkZXIiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJwYXRpZW50SWQiLCJwcm92aWRlcklkIiwiYXBwb2ludG1lbnRUeXBlSWQiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicXVlcnkiLCJmaWx0ZXIiLCJzdGFydFRpbWUiLCJndGUiLCJEYXRlIiwibHRlIiwiaW4iLCJhcHBvaW50bWVudHMiLCJhcHBvaW50bWVudCIsImZpbmRNYW55Iiwid2hlcmUiLCJpbmNsdWRlIiwicGF0aWVudCIsInByb3ZpZGVyIiwiYXBwb2ludG1lbnRUeXBlIiwib3JkZXJCeSIsImNvbnNvbGUiLCJ0aXRsZSIsImVuZFRpbWUiLCJub3RlcyIsImJvZHkiLCJmaW5kVW5pcXVlIiwiaWQiLCJwYXJzZWRTdGFydFRpbWUiLCJwYXJzZWRFbmRUaW1lIiwiaXNOYU4iLCJnZXRUaW1lIiwib3ZlcmxhcHBpbmdQcm92aWRlckFwcG9pbnRtZW50cyIsIk9SIiwiQU5EIiwiZ3QiLCJsdCIsImxlbmd0aCIsIm92ZXJsYXBwaW5nUGF0aWVudEFwcG9pbnRtZW50cyIsImNyZWF0ZSIsImRhdGEiLCJ0aW1lU2xvdCIsInVwZGF0ZU1hbnkiLCJpc0F2YWlsYWJsZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/appointments/index.ts\n");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.3.2_@babel+core@7.27.1_react-dom@18.3.1_react@18.3.1__react@18.3.1"], () => (__webpack_exec__("(api-node)/./node_modules/.pnpm/next@15.3.2_@babel+core@7.27.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fappointments&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fappointments%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();